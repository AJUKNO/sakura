{%- comment -%}
  Renders a country selector

  Accepts:
    - class: {String} Additional classes

  Usage:
  {%- render 'country-selector',
    class: 'mb-md'
  -%}
{%- endcomment -%}

{% if localization.available_countries.size > 1 %}
  <cmp-localization-form
    class='{{ class }}'
  >
    {% form 'localization' %}
      <div class='relative'>
        <button
          type='button'
          class='disclosure__button'
          aria-expanded='false'
          aria-controls='CountryList'
        >
          {{ localization.country.name }} (
          {{- localization.country.currency.iso_code }}
          {{ localization.country.currency.symbol }})

          <svg
            aria-hidden='true'
            focusable='false'
            role='presentation'
            class='icon icon-caret'
            viewBox='0 0 10 6'
          >
            <path fill-rule="evenodd" clip-rule="evenodd" d="M9.354.646a.5.5 0 00-.708 0L5 4.293 1.354.646a.5.5 0 00-.708.708l4 4a.5.5 0 00.708 0l4-4a.5.5 0 000-.708z" fill="currentColor">
          </svg>
        </button>

        <ul
          id='CountryList'
          role='list'
          class='absolute max-h-5xl bg-white top-0 overflow-y-scroll rounded-xl drop-shadow-md'
          hidden
        >
          {% for country in localization.available_countries %}
            <li
              tabindex='-1'
            >
              <a
                href='#'
                {% if country.iso_code == localization.country.iso_code %}
                  aria-current='true'
                {% endif %}
                class='p-md block hover:bg-on-primary/5'
                data-value='{{ country.iso_code }}'
              >
                {{ country.name }} ({{ country.currency.iso_code }}
                {{ country.currency.symbol }})
              </a>
            </li>
          {% endfor %}
        </ul>

        <input
          type='hidden'
          name='country_code'
          value='{{ localization.country.iso_code }}'
        >
      </div>
    {% endform %}
  </cmp-localization-form>
{% endif %}
